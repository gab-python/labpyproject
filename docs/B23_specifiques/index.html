<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.21.0 by Michael Rose
  Copyright 2013-2020 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->
<html lang="fr" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-9YF4SDCZF8"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-9YF4SDCZF8');
</script>

<!-- begin _includes/seo.html --><title>PROJET &gt; Développements &gt; 3- Développements spécifiques - Documentation du projet labpyproject</title>
<meta name="description" content="Un jeu de labyrinthe en python 3, des développements génériques et un retour d’expérience sur des questions techniques.">


  <meta name="author" content="Gabriel Leroy">
  


<meta property="og:type" content="website">
<meta property="og:locale" content="fr_FR">
<meta property="og:site_name" content="Documentation du projet labpyproject">
<meta property="og:title" content="PROJET &gt; Développements &gt; 3- Développements spécifiques">
<meta property="og:url" content="http://localhost:4000/labpyproject/B23_specifiques/">


  <meta property="og:description" content="Un jeu de labyrinthe en python 3, des développements génériques et un retour d’expérience sur des questions techniques.">



  <meta property="og:image" content="http://localhost:4000/labpyproject/assets/images/fond_projet_s0006.png">









  

  


<link rel="canonical" href="http://localhost:4000/labpyproject/B23_specifiques/">




<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    
      "@type": "Person",
      "name": "Gabriel Leroy",
      "url": "http://localhost:4000/labpyproject/"
    
  }
</script>






<!-- end _includes/seo.html -->


<link href="/labpyproject/feed.xml" type="application/atom+xml" rel="alternate" title="Documentation du projet labpyproject Feed">

<!-- https://t.co/dKP3o1e -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/labpyproject/assets/css/main.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css">

<!--[if IE]>
  <style>
    /* old IE unsupported flexbox fixes */
    .greedy-nav .site-title {
      padding-right: 3em;
    }
    .greedy-nav button {
      position: absolute;
      top: 0;
      right: 0;
      height: 100%;
    }
  </style>
<![endif]-->



    <!-- start custom head snippets -->

<!-- insert favicons. use https://realfavicongenerator.net/ -->

<!-- end custom head snippets -->

  </head>

  <body class="layout--single">
    <nav class="skip-links">
  <h2 class="screen-reader-text">Skip links</h2>
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
        <a class="site-title" href="/labpyproject/">
          Documentation du projet labpyproject
          <span class="site-subtitle">Partage d'expérience autour du développement, de l'optimisation et de la distribution d'un jeu d'arcade en python.</span>
        </a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a href="/labpyproject/A_jeu/">LE JEU</a>
            </li><li class="masthead__menu-item">
              <a href="/labpyproject/B_projet/">LE PROJET</a>
            </li></ul>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      
  







<div class="page__hero--overlay"
  style=" background-image: url('/labpyproject/assets/images/fond_projet_s0006.png');"
>
  
    <div class="wrapper">
      <h1 id="page-title" class="page__title" itemprop="headline">
        
          PROJET &gt; Développements &gt; 3- Développements spécifiques

        
      </h1>
      
        <p class="page__lead">
</p>
      
      


      
      
    </div>
  
  
</div>





<div id="main" role="main">
  
  <div class="sidebar sticky">
  
  
    
      
      
      
      
    
    
      

<nav class="nav__list">
  
  <input id="ac-toc" name="accordion-toc" type="checkbox" />
  <label for="ac-toc">Toggle Menu</label>
  <ul class="nav__items">
    
      <li>
        
          <a href="/labpyproject/B1_contexte/"><span class="nav__sub-title">Contexte</span></a>
        

        
      </li>
    
      <li>
        
          <span class="nav__sub-title">> Développements</span>
        

        
        <ul>
          
            <li><a href="/labpyproject/B21_introduction/">1- Introduction</a></li>
          
            <li><a href="/labpyproject/B22_generiques/">2- Développements génériques</a></li>
          
            <li><a href="/labpyproject/B23_specifiques/" class="active">3- Développements spécifiques</a></li>
          
        </ul>
        
      </li>
    
      <li>
        
          <a href="/labpyproject/B31_introduction/"><span class="nav__sub-title">Optimisation</span></a>
        

        
      </li>
    
      <li>
        
          <a href="/labpyproject/B41_introduction/"><span class="nav__sub-title">Distribution</span></a>
        

        
      </li>
    
      <li>
        
          <a href="/labpyproject/B5_credits/"><span class="nav__sub-title">Crédits</span></a>
        

        
      </li>
    
  </ul>
</nav>

    
  
  </div>



  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="PROJET &gt; Développements &gt; 3- Développements spécifiques">
    <meta itemprop="description" content="">
    
    

    <div class="page__inner-wrap">
      

      <section class="page__content" itemprop="text">
        
          <aside class="sidebar__right sticky">
            <nav class="toc">
              <header><h4 class="nav__title"><i class="fas fa-file-alt"></i> Plan</h4></header>
              <ul class="toc__menu">
  <li><a href="#31--a-propos-du-package-applicatif-app">3.1- A propos du package applicatif (app)</a></li>
  <li><a href="#32--a-propos-du-package-métier-bus">3.2- A propos du package métier (bus)</a></li>
  <li><a href="#33--a-propos-du-package-graphique-gui">3.3- A propos du package graphique (gui)</a></li>
</ul>

            </nav>
          </aside>
        
        <p>Le package <strong>labpyproject.apps</strong> est destiné aux <strong>applications « réelles »</strong>. Il n’en contient qu’une seule initialement, le jeu <a href="/labpyproject/code/labpyproject.apps.labpyrinthe.html"><strong>labpyproject.apps.labpyrinthe</strong></a>.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>labpyproject
├── labpyproject.apps
│   └── labpyproject.apps.labpyrinthe
│       ├──     labpyproject.apps.labpyrinthe.app
│       ├──     labpyproject.apps.labpyrinthe.bus
│       ├──     labpyproject.apps.labpyrinthe.gui
│       ├──     clientConsole
│       ├──     clientPygame
│       ├──     serverConsole
│       ├──     standaloneConsole
│       ├──     standalonePygame
│       └──     standaloneTkinter
└── labpyproject.core
</code></pre></div></div>

<p>Ce pakage contient:</p>
<ul>
  <li>un package applicatif <strong>app</strong> dédié à l’initialisation de l’application et à son fonctionnement global (communication inter-threads) ,</li>
  <li>un package métier <strong>bus</strong> prenant en charge la gestion du jeu,</li>
  <li>un package graphique <strong>gui</strong> dédié aux différentes interfaces,</li>
  <li>six scripts permettant de lancer différentes versions du jeu (standalone, client, serveur) dans un ou plusieurs formats (console, pygame, tkinter).</li>
</ul>

<div class="notice--info">
  <h4 class="no_toc">Remarque:</h4>
  
<p>Les aspects réseau sont traités via le package générique <a href="/labpyproject/code/labpyproject.core.net.custom_TCP.html"><strong>labpyproject.core.net</strong></a>.</p>

</div>

<h2 id="31--a-propos-du-package-applicatif-app">3.1- A propos du package applicatif (app)</h2>

<p>Ce package définit le gestionnaire global de l’application (classe <strong>AppManager</strong> du module <a href="/labpyproject/code/labpyproject.apps.labpyrinthe.app.application.html"><strong>application</strong></a>). Celui-ci assure un rôle d’initialisation puis de communication entre les composants de l’application.</p>

<h2 id="32--a-propos-du-package-métier-bus">3.2- A propos du package métier (bus)</h2>

<p>Ce package définit le composant métier de l’application (classe <strong>GameManager</strong> du module <strong>game_manager</strong>). Ce composant gère les différentes phases du jeu (voir le <a href="/labpyproject/code/api/labpyproject.apps.labpyrinthe.bus.game_manager.GameManager.html#labpyproject.apps.labpyrinthe.bus.game_manager.GameManager"><strong>plan du code source du composant métier</strong></a>)</p>

<div class="notice--info">
  <h4 class="no_toc">Remarques à propos des problématiques de synchronisation</h4>
  
<ul>
  <li><strong>Synchronisation du composant métier et de l’interface</strong></li>
</ul>

<p>Certains affichages pouvant demander une durée indéterminée (publication initiale d’une carte, animation avec n pas d’explosions), un système d’affichages suivis permet au GameManager de lancer un ordre d’affichage associé à un id et un callback. Lorsque l’interface a achevé le processus d’affichage elle confirme le traitement de l’id associé, le GameManager appelant alors le callback enregistré.</p>

<ul>
  <li><strong>Synchronisation clients / serveur</strong></li>
</ul>

<p>En mode réseau, le GameManager du serveur prend en charge toutes les actions de jeu. Il envoie à tous les clients des ordres de mise à jour (nouveaux bonus, nouvelles mines, bots éliminés ou joueurs déconnectés) et les commandes à appliquer. Le serveur ne pouvant savoir à priori quelles durées ces traitements prendront côté clients, il attend une confirmation de chacun d’eux avant de passer au coup suivant. Plutôt que de renvoyer systématiquement l’intégralité des données du labyrinthe, le serveur n’envoie que les dernières données modifiées. Pour s’assurer de la synchronisation des clients, il procède par comparaison de clefs reflétant ces modifications. Si un client ne renvoie pas la bonne clef, il est intégralement resynchronisé (rechargement complet des données du labyrinthe).</p>

</div>

<p>Le package contient également trois sous packages (<strong>commands</strong>, <strong>helpers</strong> et <strong>model</strong>) découpés en plusieurs modules.</p>

<p>Parmi ceux-ci :</p>
<ul>
  <li>le module <a href="/labpyproject/code/labpyproject.apps.labpyrinthe.bus.model.core_matrix.html"><strong>core_matrix</strong></a> du sous package <strong>model</strong> porte la modélisation du labyrinthe.</li>
  <li>le module <strong>cmd_manager</strong> du sous package <strong>commands</strong> définit la classe <strong>CommandManager</strong>, qui est le « système expert » déterminant les choix de commandes des joueurs automatiques:
    <ul>
      <li><a href="/labpyproject/code/labpyproject.apps.labpyrinthe.bus.commands.cmd_manager.html"><strong>Principes de pilotage et optimisations</strong></a></li>
      <li><a href="/labpyproject/code/api/labpyproject.apps.labpyrinthe.bus.commands.cmd_manager.CommandManager.html#labpyproject.apps.labpyrinthe.bus.commands.cmd_manager.CommandManager%20"><strong>Plan du code source du « système expert »</strong></a></li>
    </ul>
  </li>
</ul>

<h2 id="33--a-propos-du-package-graphique-gui">3.3- A propos du package graphique (gui)</h2>

<p>Le package <a href="/labpyproject/code/labpyproject.apps.labpyrinthe.gui.html"><strong>gui</strong></a> est structuré selon une publication « multi formats »:</p>
<ul>
  <li>Le sous package <strong>skinBase</strong> est une collection de modules génériques portant la logique applicative des interfaces</li>
  <li>Les sous packages <strong>skinConsole</strong>, <strong>skinPygame</strong> et <strong>skinTkinter</strong> dérivent les éléments de skinBase dans leur format respectif</li>
  <li>Les trois modules <strong>GUIConsole</strong>, <strong>GUIPygame</strong> et <strong>GUITk</strong> proposent le composant d’interface principal (au sens de GUIComp de pylabproject.core.app.app_components) associé à leur format (console, pygame ou tkinter)</li>
</ul>

<p>Les ressources (images, polices) sont gérées dans des classes dédiées (SkinBase du module skinBase.skin_base et ses subclasses) optimisant leur gestion (mise en cache).</p>

<p>Le format le plus abouti est le format pygame dans lequel on utilise le moteur de publication développé dans labpyproject.core.pygame:</p>

<p><img src="/labpyproject/assets/images/bandeau_pygame_exp.png" alt="aperçu pygame" class="align-center" /></p>

<p>Aperçu de la maquette Tkinter :</p>

<p><img src="/labpyproject/assets/images/bandeau_tk_exp.png" alt="aperçu tkinter" class="align-center" /></p>

<p>Aperçu du format console (injouable mais utile lors des développements):</p>

<p><img src="/labpyproject/assets/images/bandeau_console_exp.png" alt="aperçu console" class="align-center" /></p>


        
      </section>

      <footer class="page__meta">
        
        


        

      </footer>

      

      
    </div>

    
  </article>

  
  
</div>

    </div>

    

    <div id="footer" class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    

    
      
        
          <li><a href="https://github.com/gab-python/labpyproject" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
        
      
    
    <!--
    <li><a href="/labpyproject/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
    -->
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2021 - Gabriel Leroy - Licence GPL. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>

      </footer>
    </div>

    
  <script src="/labpyproject/assets/js/main.min.js"></script>










  </body>
</html>
